/*
 * Sketch de Teste REAL do Ar Condicionado (TCL)
 * Envia o comando "Desligar 19 Graus" usando sendRaw()
 *
 */
#include <Arduino.h>
#include <IRremote.hpp>

const int kSendPin = 27; // O pino do LED Transmissor

/*const uint16_t CODIGO_LIGAR_19[227] = {
    3100, 1600, 500, 1100, 500, 1100, 450, 350,
    500, 350, 450,- 350 + 500,-1100 + 450,- 350 + 500,- 300
 + 500,-1100 + 500,-1100 + 450,- 350 + 500,-1100
 + 500,- 300 + 500,- 350 + 450,-1100 + 500,-1100
 + 500,- 300 + 500,-1100 + 500,-1100 + 500,- 300
 + 500,- 350 + 450,-1100 + 500,- 350 + 450,- 350
 + 500,- 350 + 450,-1100 + 500,- 350 + 450,- 350
 + 500,- 300 + 500,- 350 + 450,- 350 + 500,- 350
 + 450,- 350 + 500,- 300 + 500,- 350 + 450,- 350
 + 500,- 300 + 500,- 350 + 500,- 300 + 500,- 350
 + 450,- 350 + 500,- 300 + 500,- 350 + 450,- 350
 + 500,- 300 + 500,- 350 + 500,-1100 + 450,- 350
 + 500,- 300 + 500,- 350 + 450,- 350 + 500,- 300
 + 500,- 350 + 500,-1100 + 450,- 350 + 500,- 300
 + 500,- 350 + 450,- 350 + 500,- 300 + 500,- 350
 + 500,- 300 + 500,- 350 + 450,- 350 + 500,- 300
 + 500,-1100 + 500,-1100 + 450,- 350 + 500,- 350
 + 450,- 350 + 500,- 300 + 500,- 350 + 450,-1100
 + 450,- 400 + 450,- 350 + 450,- 400 + 450,- 350
 + 450,- 350 + 450,- 400 + 450,- 350 + 500,- 300
 + 500,- 350 + 450,- 350 + 500,- 350 + 450,- 350
 + 450,- 350 + 500,- 350 + 450,- 350 + 500,- 300
 + 500,- 350 + 450,- 350 + 500,- 350 + 450,- 350
 + 450,- 350 + 500,- 350 + 450,- 350 + 500,- 300
 + 500,- 350 + 450,- 350 + 500,- 350 + 450,- 350
 + 450,- 350 + 500,- 350 + 450,- 350 + 500,- 300
 + 500,- 350 + 450,- 350 + 500,- 350 + 450,-1100
 + 500,- 350 + 450,- 350 + 500,- 300 + 500,- 350
 + 450
}
*/
const uint16_t CODIGO_DESLIGAR_19[227] = {
    3100, 1600, 500, 1100, 450, 1100, 500, 350, 450, 350,
    500, 350, 450, 1100, 500, 350, 450, 350, 500, 1100,
    450, 1100, 500, 350, 500, 1100, 450, 350, 500, 300,
    500, 1100, 500, 1100, 450, 350, 500, 1100, 500, 1100,
    450, 350, 500, 300, 500, 1100, 500, 300, 500, 350,
    500, 300, 500, 1100, 500, 300, 500, 350, 450, 350,
    500, 300, 500, 350, 500, 300, 500, 350, 450, 350,
    500, 300, 500, 350, 450, 350, 500, 300, 500, 350,
    500, 300, 500, 350, 450, 350, 500, 300, 500, 350,
    450, 350, 500, 350, 450, 1100, 500, 350, 450, 350,
    500, 300, 500, 350, 450, 350, 500, 300, 500, 1100,
    500, 350, 450, 350, 500, 300, 500, 350, 450, 350,
    500, 300, 500, 350, 500, 300, 500, 350, 450, 350,
    500, 1100, 500, 1050, 550, 300, 500, 300, 500, 300,
    550, 300, 500, 300, 550, 1050, 500, 300, 550, 300,
    500, 300, 500, 300, 550, 300, 500, 300, 500, 350,
    500, 300, 500, 300, 550, 300, 500, 300, 500, 300,
    550, 300, 500, 300, 500, 350, 500, 300, 500, 300,
    550, 300, 500, 300, 500, 300, 550, 300, 500, 300,
    500, 350, 500, 300, 500, 300, 550, 300, 450, 350,
    500, 300, 500, 350, 500, 300, 500, 350, 450, 350,
    500, 300, 500, 350, 450, 350, 500, 1100, 450, 350,
    500, 300, 500, 350, 450, 350, 450
};


void setup() {
    Serial.begin(115200);
    while (!Serial) { delay(50); }

    // Inicia o transmissor. 38 kHz é a frequência padrão.
    IrSender.begin(kSendPin, false); 

    Serial.println(F("==================================="));
    Serial.println(F("Teste do Ar Condicionado TCL (sendRaw)"));
    Serial.println(F("Enviando comando 'DESLIGAR 19 Graus' em 5s..."));
    delay(5000);
}

void loop() {
    Serial.print(F("Enviando comando RAW"));

    int tamanhoArray = sizeof(CODIGO_DESLIGAR_19) / sizeof(CODIGO_DESLIGAR_19[0]);
    
    IrSender.sendRaw(CODIGO_DESLIGAR_19, tamanhoArray, 40); 

    Serial.println(F("Comando enviado."));
    Serial.println(F("A enviar novamente em 5 segundos..."));
    delay(5000); // Espera 5 segundos
}
